%% literal tables

\newcommand{\One}{\mathbbm{1}}

\newcolumntype{H}{>{\columncolor{black}\color{white}}c}
\newcommand{\colhd}[1]{\multicolumn{1}{H}{\col{#1}}}
\newcommand{\colhdx}[1]{\multicolumn{2}{H}{\col{#1}}}
\newenvironment{littbl}{%
  \renewcommand{\arraystretch}{0.7}
  \renewcommand{\arraycolsep}{1pt}}{}


\newcommand{\col}[1]{\mathsf{#1}}
\DeclareMathOperator{\postbl}{%
  \raisebox{1ex}{%
  \small
  \begin{littbl}   
    $
    \begin{array}[t]{|c|}
      \colhd{\scriptstyle p} \\
      \scriptstyle 1           \\
      \hline
    \end{array}
    $
  \end{littbl}
  }
}

\DeclareMathOperator{\desctbl}{%
  \raisebox{1ex}{%
  \small
  \begin{littbl}   
    $
    \begin{array}[t]{|c|}
      \colhd{\scriptstyle d} \\
      \scriptstyle 1           \\
      \hline
    \end{array}
    $
  \end{littbl}
  }
}

\DeclareMathOperator{\itemtbl}{%
  \raisebox{1ex}{%
  \small
  \begin{littbl}   
    $
    \begin{array}[t]{|c|}
      \colhd{\scriptstyle i} \\
      \scriptstyle c \\
      \hline
    \end{array}
    $
  \end{littbl}
  }
}

\DeclareMathOperator{\gentbl}{%
  \raisebox{1ex}{%
  \small
  \begin{littbl}   
    $
    \begin{array}[t]{|c|c|c|}
      \colhd{\scriptstyle a} & \colhd{\scriptstyle b} & \colhd{\scriptstyle c}\\
      \scriptstyle \vdots & \scriptstyle \vdots & \scriptstyle \vdots  \\
      \hline
    \end{array}
    $
  \end{littbl}
  }
}

\DeclareMathOperator{\tableref}{%
    \begin{tikzpicture}[line width=0.4pt,baseline=-1ex,join=bevel,
                        x=1cm,y=1cm,xscale=0.10,yscale=0.15,sharp corners]
    \useasboundingbox (-0.3,0.0) rectangle (2.3,0.3);
    \draw (0,0) to [controls=+(90:0.5) and +(90:0.5)] (2,0);
    \draw (0,0) .. controls +(-90:0.5) and +(-90:0.5) .. (2,0)
        -- (2,-0.3) .. controls +(-90:0.5) and +(-90:0.5) .. (0,-0.3) -- (0,0);
          \draw (0,0) .. controls +(-90:0.5) and +(-90:0.5) .. (2,0)
        -- (2,-0.6) .. controls +(-90:0.5) and +(-90:0.5) .. (0,-0.6) -- (0,0);
          \draw (0,0) .. controls +(-90:0.5) and +(-90:0.5) .. (2,0)
        -- (2,-0.9) .. controls +(-90:0.5) and +(-90:0.5) .. (0,-0.9) -- (0,0);
    \end{tikzpicture}
}

%% rank
\DeclareMathOperator{\rank}{% [[[
\begin{tikzpicture}
  [scale=0.5,
   baseline=0ex,
   join=round,
   x=1ex, y=1.3ex,
   line width=0.05ex]
  \draw (0.8,0.5) -- (1.8,0) -- (2.8,0.5) -- (2.8,2) -- (0.8,2) -- cycle;
  \draw (1.0,0.8) -- (1.8,0.34) -- (2.6,0.8);
  \draw (1.0,1.1) -- (1.8,0.64) -- (2.6,1.1);
  \useasboundingbox (0.8,0) rectangle (3.3,2);        
\end{tikzpicture}
}% ]]]

%% sjoin
\DeclareMathOperator{\sjoin}{% [[[
\begin{tikzpicture}
  [scale=0.5,
   baseline=-1ex,
   join=round,
   x=1ex, y=1.3ex,
   line width=0.05ex]
  \node[circle,draw,inner sep=0] {$\Join$};
  \useasboundingbox (0.8,0) rectangle (3.3,2);        
\end{tikzpicture}
}% ]]]

\newcommand{\tabname}[2]{%
  \multicolumn{#1}{@{}l}{%
    \begin{tikzpicture}[baseline]
      \node [inner sep=1pt] (T) {\phantom{#2}};
      \draw [fill=black]
            (T.south west) {[rounded corners=2pt] -- (T.north west)  --
            (T.north east)} -- (T.south east) -- cycle;
      \node [inner sep=1pt,text=white] {#2};
    \end{tikzpicture}}}
